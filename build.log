#0 building with "orbstack" instance using docker driver

#1 [internal] load build definition from Dockerfile.template
#1 transferring dockerfile: 1.13kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/nginx:alpine
#2 DONE 0.0s

#3 [auth] library/node:pull token for registry-1.docker.io
#3 DONE 0.0s

#4 [internal] load metadata for docker.io/library/node:18
#4 DONE 3.0s

#5 [internal] load .dockerignore
#5 transferring context: 103B done
#5 DONE 0.0s

#6 [web 1/4] FROM docker.io/library/nginx:alpine
#6 CACHED

#7 [builder 1/8] FROM docker.io/library/node:18@sha256:ddd173cd94537e155b378342056e0968e8299eb3da9dd5d412d3b7f796ac38c0
#7 resolve docker.io/library/node:18@sha256:ddd173cd94537e155b378342056e0968e8299eb3da9dd5d412d3b7f796ac38c0 0.1s done
#7 DONE 0.1s

#8 [internal] load build context
#8 transferring context: 392.92MB 5.0s
#8 ...

#7 [builder 1/8] FROM docker.io/library/node:18@sha256:ddd173cd94537e155b378342056e0968e8299eb3da9dd5d412d3b7f796ac38c0
#7 sha256:fc72222580af3e75d94144a151028f7ad88115d753574c0885fa0853bf88753a 2.50kB / 2.50kB done
#7 sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 29.36MB / 49.58MB 6.5s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 11.53MB / 64.35MB 6.5s
#7 sha256:ddd173cd94537e155b378342056e0968e8299eb3da9dd5d412d3b7f796ac38c0 6.41kB / 6.41kB done
#7 sha256:b2c3c88b29ee0c56f65f96be80ecd1154d83d0ea73dddba1e4636e42da849744 6.71kB / 6.71kB done
#7 sha256:95b894d63c771a6056bc65ff25192b251413259ba7d160b0076f0f5d7975dc39 23.59MB / 23.59MB 6.5s
#7 sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 33.55MB / 49.58MB 7.2s
#7 sha256:95b894d63c771a6056bc65ff25192b251413259ba7d160b0076f0f5d7975dc39 23.59MB / 23.59MB 6.9s done
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 0B / 202.64MB 7.2s
#7 ...

#8 [internal] load build context
#8 transferring context: 544.86MB 7.4s done
#8 DONE 7.5s

#7 [builder 1/8] FROM docker.io/library/node:18@sha256:ddd173cd94537e155b378342056e0968e8299eb3da9dd5d412d3b7f796ac38c0
#7 sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 36.70MB / 49.58MB 7.6s
#7 sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 39.85MB / 49.58MB 7.9s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 15.73MB / 64.35MB 7.9s
#7 sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 44.04MB / 49.58MB 8.4s
#7 sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 47.19MB / 49.58MB 9.1s
#7 sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 49.58MB / 49.58MB 9.5s done
#7 extracting sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 0.1s
#7 sha256:4767b1635f4a478c9c34f6169008202af623e1c05ea663f697e49bbb25ac0166 0B / 3.33kB 9.6s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 19.92MB / 64.35MB 9.8s
#7 sha256:4767b1635f4a478c9c34f6169008202af623e1c05ea663f697e49bbb25ac0166 3.33kB / 3.33kB 10.2s
#7 sha256:4767b1635f4a478c9c34f6169008202af623e1c05ea663f697e49bbb25ac0166 3.33kB / 3.33kB 10.3s done
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 0B / 45.69MB 10.5s
#7 extracting sha256:c1e0ef7b956a07c7b090256aa16cbb0550a34d0625d1d23c5b1a76e92a58d01e 1.0s done
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 24.12MB / 64.35MB 10.7s
#7 extracting sha256:95b894d63c771a6056bc65ff25192b251413259ba7d160b0076f0f5d7975dc39
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 10.49MB / 202.64MB 11.0s
#7 extracting sha256:95b894d63c771a6056bc65ff25192b251413259ba7d160b0076f0f5d7975dc39 0.3s done
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 28.31MB / 64.35MB 11.6s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 3.15MB / 45.69MB 12.2s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 32.51MB / 64.35MB 12.8s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 20.97MB / 202.64MB 13.3s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 6.29MB / 45.69MB 13.5s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 36.70MB / 64.35MB 13.9s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 9.44MB / 45.69MB 14.6s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 31.46MB / 202.64MB 15.4s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 12.58MB / 45.69MB 15.5s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 15.73MB / 45.69MB 16.3s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 40.89MB / 64.35MB 16.6s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 41.94MB / 202.64MB 17.0s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 18.87MB / 45.69MB 17.7s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 52.43MB / 202.64MB 18.6s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 22.02MB / 45.69MB 18.6s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 45.09MB / 64.35MB 19.4s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 25.17MB / 45.69MB 19.6s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 28.31MB / 45.69MB 20.4s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 63.96MB / 202.64MB 20.8s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 31.46MB / 45.69MB 21.2s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 49.28MB / 64.35MB 22.1s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 34.60MB / 45.69MB 22.1s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 74.45MB / 202.64MB 22.7s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 37.75MB / 45.69MB 22.9s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 40.89MB / 45.69MB 23.8s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 84.93MB / 202.64MB 24.7s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 44.04MB / 45.69MB 24.7s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 53.48MB / 64.35MB 25.0s
#7 sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 45.69MB / 45.69MB 25.1s done
#7 sha256:ff943d243a0d6b882ab5e03100c4c2382b7fa1306208088f351c27de72d97fb0 0B / 1.25MB 25.2s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 95.42MB / 202.64MB 26.1s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 57.67MB / 64.35MB 26.7s
#7 sha256:ff943d243a0d6b882ab5e03100c4c2382b7fa1306208088f351c27de72d97fb0 1.05MB / 1.25MB 27.0s
#7 sha256:ff943d243a0d6b882ab5e03100c4c2382b7fa1306208088f351c27de72d97fb0 1.25MB / 1.25MB 27.1s done
#7 sha256:b36b8e92e3a7953f2a5fd00e4fd5fc29cb0d70958d32c19601eb23186b6bc3d9 0B / 446B 27.2s
#7 sha256:b36b8e92e3a7953f2a5fd00e4fd5fc29cb0d70958d32c19601eb23186b6bc3d9 446B / 446B 27.8s done
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 61.87MB / 64.35MB 28.0s
#7 sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 64.35MB / 64.35MB 28.5s done
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 105.91MB / 202.64MB 28.5s
#7 extracting sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 116.39MB / 202.64MB 29.5s
#7 extracting sha256:cb5594266b1bacf9ad6855b00d9c5c98e721001eb115218eda673e548e04fdbf 1.4s done
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 127.93MB / 202.64MB 30.5s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 138.41MB / 202.64MB 31.5s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 148.90MB / 202.64MB 32.6s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 159.38MB / 202.64MB 33.6s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 169.87MB / 202.64MB 34.5s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 180.36MB / 202.64MB 35.5s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 190.84MB / 202.64MB 36.5s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 201.33MB / 202.64MB 37.5s
#7 sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 202.64MB / 202.64MB 37.7s done
#7 extracting sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 0.1s
#7 extracting sha256:59d4884f85282b9a352dbcedf2cccd073a63e60b151be84375ce9279dec1c553 3.2s done
#7 extracting sha256:4767b1635f4a478c9c34f6169008202af623e1c05ea663f697e49bbb25ac0166
#7 extracting sha256:4767b1635f4a478c9c34f6169008202af623e1c05ea663f697e49bbb25ac0166 done
#7 extracting sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 0.1s
#7 extracting sha256:7ad827fdfa492a1d157db8b502be89b4c74e853dfd47f418da31de9cdd492bc7 1.1s done
#7 extracting sha256:ff943d243a0d6b882ab5e03100c4c2382b7fa1306208088f351c27de72d97fb0
#7 extracting sha256:ff943d243a0d6b882ab5e03100c4c2382b7fa1306208088f351c27de72d97fb0 0.0s done
#7 extracting sha256:b36b8e92e3a7953f2a5fd00e4fd5fc29cb0d70958d32c19601eb23186b6bc3d9 done
#7 DONE 43.2s

#9 [builder 2/8] WORKDIR /app
#9 DONE 1.2s

#10 [builder 3/8] COPY package.json yarn.lock ./
#10 DONE 0.1s

#11 [builder 4/8] COPY nx.json tsconfig.base.json ./
#11 DONE 0.1s

#12 [builder 5/8] RUN yarn install --frozen-lockfile
#12 0.261 yarn install v1.22.19
#12 0.307 [1/4] Resolving packages...
#12 0.508 [2/4] Fetching packages...
#12 88.08 [3/4] Linking dependencies...
#12 88.09 warning " > elysia@1.1.22" has unmet peer dependency "@sinclair/typebox@>= 0.32.0".
#12 88.09 warning "@nx/react > file-loader@6.2.0" has unmet peer dependency "webpack@^4.0.0 || ^5.0.0".
#12 88.10 warning "@swc-node/register > @swc-node/core@1.13.3" has unmet peer dependency "@swc/types@>= 0.1".
#12 93.92 [4/4] Building fresh packages...
#12 95.50 Done in 95.24s.
#12 DONE 95.9s

#13 [builder 6/8] COPY . .
#13 DONE 6.9s

#14 [builder 7/8] RUN ls
#14 0.140 README.md
#14 0.140 apps
#14 0.140 build.log
#14 0.140 bun.lockb
#14 0.140 components.json
#14 0.140 docker
#14 0.140 extract
#14 0.140 gateway
#14 0.140 node_modules
#14 0.140 nx.json
#14 0.140 package.json
#14 0.140 shared
#14 0.140 tsconfig.base.json
#14 0.140 tsconfig.json
#14 0.140 vitest.workspace.ts
#14 0.140 yarn.lock
#14 DONE 0.4s

#15 [builder 8/8] RUN yarn nx run-many --target=build --all --verbose
#15 0.222 yarn run v1.22.19
#15 0.236 $ /app/node_modules/.bin/nx run-many --target=build --all --verbose
#15 2.111 
#15 2.111  NX   Failed to process project graph. Run "nx reset" to fix this. Please report the issue if you keep seeing it. See errors below.
#15 2.111 
#15 2.111 Failed to process project graph. Run "nx reset" to fix this. Please report the issue if you keep seeing it.
#15 2.111       An error occurred while processing files for the nx/js/dependencies-and-lockfile plugin.
#15 2.111     - bun.lockb: Command failed: bun /app/bun.lockb
#15 2.111   /bin/sh: 1: bun: not found
#15 2.111   
#15 2.111       Error: Command failed: bun /app/bun.lockb
#15 2.111       /bin/sh: 1: bun: not found
#15 2.111       
#15 2.111           at checkExecSyncError (node:child_process:890:11)
#15 2.111           at execSync (node:child_process:962:15)
#15 2.111           at exports.createNodes (/app/node_modules/nx/src/plugins/js/index.js:36:44)
#15 2.111           at /app/node_modules/nx/src/project-graph/plugins/utils.js:47:33
#15 2.111           at Array.map (<anonymous>)
#15 2.111           at createNodesFromFiles (/app/node_modules/nx/src/project-graph/plugins/utils.js:45:35)
#15 2.111           at LoadedNxPlugin.createNodes (/app/node_modules/nx/src/project-graph/plugins/internal-api.js:27:76)
#15 2.111           at LoadedNxPlugin.createNodes.<computed> (/app/node_modules/nx/src/project-graph/plugins/internal-api.js:44:34)
#15 2.111           at createNodes (/app/node_modules/nx/src/project-graph/plugins/isolation/plugin-worker.js:69:63)
#15 2.111 
#15 2.124 info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
#15 2.124 error Command failed with exit code 1.
#15 ERROR: process "/bin/sh -c yarn nx run-many --target=build --all --verbose" did not complete successfully: exit code: 1
------
 > [builder 8/8] RUN yarn nx run-many --target=build --all --verbose:
2.111           at exports.createNodes (/app/node_modules/nx/src/plugins/js/index.js:36:44)
2.111           at /app/node_modules/nx/src/project-graph/plugins/utils.js:47:33
2.111           at Array.map (<anonymous>)
2.111           at createNodesFromFiles (/app/node_modules/nx/src/project-graph/plugins/utils.js:45:35)
2.111           at LoadedNxPlugin.createNodes (/app/node_modules/nx/src/project-graph/plugins/internal-api.js:27:76)
2.111           at LoadedNxPlugin.createNodes.<computed> (/app/node_modules/nx/src/project-graph/plugins/internal-api.js:44:34)
2.111           at createNodes (/app/node_modules/nx/src/project-graph/plugins/isolation/plugin-worker.js:69:63)
2.111 
2.124 info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
2.124 error Command failed with exit code 1.
------
Dockerfile.template:19
--------------------
  17 |     
  18 |     # Build all projects
  19 | >>> RUN yarn nx run-many --target=build --all --verbose
  20 |     
  21 |     # Create a base image for services with production dependencies
--------------------
ERROR: failed to solve: process "/bin/sh -c yarn nx run-many --target=build --all --verbose" did not complete successfully: exit code: 1
